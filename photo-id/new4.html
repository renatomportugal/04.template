<!DOCTYPE html>
<html>
<head>
<style>
/* .background{
   width:100%;
   height:100%;
   position:absolute;
   background:url(image_7150_2e-Hubble-Legacy-Field.jpg) no-repeat;
}

.imagem-mascara {
   width: 300px;
   height: 300px;
   position:absolute;
   top:15%;
   left:15%;
   background:url(aguia2.gif) 0 0 no-repeat;
   background:url(https://lh4.ggpht.com/Auroranovaterra/SP4jZYTIl7I/AAAAAAAAAZ8/xm22Om0-jWM/s400/aguia2.png) 0 0 no-repeat;
   background-size: 5%;
   z-index: 5;
   left: 500px;
   margin-left: 50px;
}
.borboleta{
   width:100%;
   height:100%;
   position:absolute;
   top:15%;
   left:15%;
   background:url(borboleta.gif) 0 0 no-repeat;
   background:url(https://66.media.tumblr.com/fb888fc5f2be00ee435befbfc99aded9/tumblr_n37pxo6red1rrhwrjo1_250.gif) 0 0 no-repeat;
   background-size: 5%;
   z-index: 10;
}
.passaro2{
  height: 500px;
  width: 600px;
  position:absolute;
  background:url(passaro2.gif) no-repeat;
  background:url(https://i.pinimg.com/originals/d4/f7/24/d4f72472d5c02716eb71b912dde23059.gif) no-repeat;
  z-index: 3;
}
#divlink{
  height: 100px;
  width: 100px;
  position:absolute;
  z-index: 30;
  top: 210px;
  left: 710px;
}
.capacitor{
  width: 100px;
  height: 58px;
  border: 2px solid #0000ff;
} */
body{
    margin: 0px;
}
/* img {
    max-width: 100%;
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
} */
#image_wrapper{
    width:100%; /* largura da imagem máscara */
    height:100%; /* altura da imagem máscara */
    position:absolute;
}
</style>
</head>
<body onload="inicio()">

<script>
    function inicio(){
    // var jj = {src: "image_7150_2e-Hubble-Legacy-Field.jpg",width: "1280px",height: "959px", quadros:["http://example.com 691px 70px 5px solid #0000ff"]};
    // var quadros = JSON.stringify(jj);

    var gg;
    img = '[{"src": "image_7150_2e-Hubble-Legacy-Field.jpg","width": "1280px","height": "959px","quadros":["http://example.com 691px 70px 5px solid #0000ff 180px 178px", "http://example.com 692px 307px 3px solid #ff0000 182px 179px", "http://google.com 692px 545px 3px solid #ff00b6 182px 179px", "http://google.com 408px 307px 4px solid #00ff00 182px 179px", "http://google.com 127px 782px 5px solid #668833 182px 177px", "http://google.com 129px 310px 5px solid #ffff00 178px 179px"]}]';
    try {
        if (img != null) {
            var imagens = JSON.parse(img);

            for (let i = 0; i < imagens.length; i++) {
                let imagem = imagens[i];
                //Extrair o array quadros
                for (let j = 0; j < imagem.quadros.length; j++) {
                    const quadro = imagem.quadros[j];
                    var quadroarray = quadro.split(" ");
                    console.log(quadroarray);
                    
                    //Cria a div
                    var quadrodiv = document.createElement("div");
                    var id_div = "quadrodiv_" + j;
                    quadrodiv.setAttribute("id", id_div);
                    //quadrodiv.setAttribute("onclick", "window.location='" + quadroarray[0] + "'");
                    quadrodiv.setAttribute("onclick", "window.open('" + quadroarray[0] + "','_blank')" );
                    quadrodiv.setAttribute("onmouseover", "this.style.cursor='pointer';");
                    quadrodiv.setAttribute("style", "position: absolute;z-index: 30;top: " + quadroarray[1] + ";left: " + quadroarray[2] + ";border: " + quadroarray[3] + " " + quadroarray[4] + " " + quadroarray[5] + ";");
                    //Cria o Canvas
                    var quadrocanvas = document.createElement("canvas");
                    var quadrocanvastexto = document.createTextNode("Use o Google Chrome.");
                    quadrocanvas.appendChild(quadrocanvastexto);
                    var id_canvas = "quadrocanvas_" + j;
                    quadrocanvas.setAttribute("id", id_canvas);
                    quadrocanvas.setAttribute("style", "width: " + quadroarray[6] + ";height: " + quadroarray[7] + ";");
                    //Adiciona div na div image_wrapper
                    document.getElementById("image_wrapper").appendChild(quadrodiv);
                    document.getElementById(id_div).appendChild(quadrocanvas);
                }

                //Prepara o espaço
                var imagemdiv = document.getElementById("imagemdiv");
                imagemdiv.style="display: contents; width: " + imagem.width + "; height: " + imagem.height + ";";

                //Carrega a imagem
                var img = document.getElementById("img");
                img.src = imagem.src;
            }    
        }else{
            console.log("Nada foi recebido.");
        }
    } catch (error) {
        console.log(error);
    }
}

</script>

<!-- <a href="https://www.w3schools.com/html/default.asp">HTML tutorial</a> -->

  <!-- <div class="background">
      <div id="divlink" onclick="window.location='http://example.com';">
        
          <canvas id="myCanvas" class="capacitor">
          Use o Google Chrome.
          </canvas>
        
      </div>
  </div> -->
   <!-- <div class="imagem-mascara"></div> -->
   <!-- <div class="borboleta"></div> -->
   <!-- <div class="passaro2"></div> -->
   <div id="image_wrapper">
        <div id="imagemdiv">
            <img id="img" />
        </div>
    </div>

</body>
</html>
